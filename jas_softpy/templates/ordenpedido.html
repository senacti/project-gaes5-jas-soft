<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
	<link rel="stylesheet" type="text/css" href="{% static 'css/Style.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/Header.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/footer.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/buttons.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/barmenu.css' %}">

	<link rel="stylesheet" type="text/css" href="{% static 'css/estilos-dash-admin.css' %}">

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="{% static 'css/jquery.dataTables.min.css' %}">

	<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

	<link rel="shortcut icon" href="{% static 'img/iconlogo.png' %}">
	<title>PromoPlast | Produccion</title>
</head>

<body>
	<header class="cabecera">
		<div class="logo-container">
			<img class="logo-dash-admin" src="{% static 'img/logo.png' %}" alt="logo">
		</div>
		<ul class="list-menu-ul">
			<li class="list-menu-dash"> <img class="img-menu-dash" src="{% static 'img/campana.png' %}" alt="Campana"> </li>
			
			<li class="nav-item dropdown">
				<a id="navbarDropdown" class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
				aria-haspopup="true" aria-expanded="false" v-pre>
				<span>{{ user.username }}</span>
			</a>
				<div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown" id="cerrar">
					<a class="dropdown-item" href="@{/logout}" onclick="event.preventDefault();
									document.getElementById('logout-form').submit();">
						Cerrar sesión
					</a>
					<form id="logout-form" action="@{/logout}" method="POST" class="d-none">
					</form>
				</div>
			</li>
		</ul>
	</header>
	
	<div class="container-fluid">
		<div class="row">
			
			{% include 'menumodulos.html' %}

			<div class="col-10" id="contentd">
				<div class="card" id="cardash">
					<nav class="descrip-menu">
						<a class="message-ubication" href="@{/insumo/}">Insumos</a>
					</nav>
					<div class="container mt-3">
						<h2>{{ message }}</h2>
						<p></p>
						<table class="table table-striped" id="tablas">
							<thead>
								<tr>									
									<th>Orden Produccion</th>
									<th>Cantidad</th>									
									<th>Insumos</th>									
									<th>Funciones</th>
								</tr>
							</thead>
							<tbody>
								{% for OP in object_list %}
									<tr>												
										<td>{{ OP.Production_OrderDate }}</td>
										<td>{{ OP.quantity_used }}</td>
										<td>{{ OP.supplies }}</td> 
										<td>		
											{% comment  %}
											<a href="{% url 'editar_orden_pedido' OP.id %}">
												<button type="button" class="btn btn-success">
													Editar
												</button>
											</a>										
											<a href="{% url 'eliminar_orden_pedido' OP.id %}">
												<button type="button" class="btn btn-danger">
													Eliminar
												</button>
											</a>{% endcomment %}					
										
										</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
						<div class="button-new">
							<button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                data-bs-target="#create">
                                Agregar Produccion
                            </button>
							<a class="button-excel" href="@{/ordenpedido/exportar/excel}">
								Exportar a Excel
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
		<div class="modal" id="create">
	    <div class="modal-dialog">
	       <div class="modal-content">
	
	            <!-- Modal Header -->
	            <div class="modal-header">
	                <h4 class="modal-title">Agregar Produccion</h4>
	                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
	            </div>
	
	            <!-- Modal body -->
	            <form action="@{/ordenpedido/guardar}" class="was-validated" object="${ordenpedido}" method="post">
	                <div class="modal-body">
	                    <div class="row">
	                        <div class="form-floating mb-3 mt-3 col-4">
	                            <input type="text" class="form-control" id="cantidadProducto"
	                                placeholder="cantidadProducto"name="cantidadProducto" maxlength="30" required>
	                            <label for="cantidadProducto">Cantidad</label>
	                        </div>
	                        <div class="form-floating mt-3 mb-3 col-7">
	                            <input type="datetime-local" required class="form-control" id="fechaPedido"
	                                placeholder="fechaPedido" name="fechaPedido" maxlength="20">
	                            <label for="fechaPedido">fecha</label>
	                        </div>
	                        <div class="form-floating mt-3 mb-3 col-6">
	                            <select class="form-select" id="IdProducto" name="IdProducto">
	                                <option value="1">botellas de plasticos</option>
	                                <option value="2">Ganchos plasticos</option>
	                                <option value="3">Tubo de plastico</option>
	                                <option value="4">Contenedor de plastico</option>
	                                <option value="5">Tapon de plastico</option>
	                            </select>
	                            <label for="IdProducto" class="form-label">Producto</label>
	                        </div>
	                        <div class="form-floating mt-4 mb-3 col-6">
	                            <select class="form-select" id="IdEstadopedido" name="IdEstadopedido">
	                                <option value="1">En produccion</option>
	                                <option value="2">En espera</option>
	                                <option value="3">En alistamiento</option>
	                            </select>
	                            <label for="IdEstadopedido" class="form-label">Estado</label>
	                        </div>
	                    </div>
	                    <button type="submit" id="submitordenpedido" class="hidden"></button>
	            </form>
	        </div>
	
	        <!-- Modal footer -->
	        <div class="modal-footer">
	            <button type="submit" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
	            <button type="button" onclick="document.getElementById('submitordenpedido').click();return false;"
	                class="btn btn-primary">Guardar</button>
	        </div>
	    </div>
	</div>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="{% static 'js/jquery.dataTables.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/dataTables.bootstrap.min.js' %}"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <script type="text/javascript" src="{% static 'js/validaciones.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/slidebar.js' %}"></script>

	<script>
        $(document).ready(function () {
            var oTable = $("#tablas").dataTable({
                dom: 'Bfrtip',

                language: {
                    sProcessing: "Procesando...",
                    sLengthMenu: "Mostrar MENU",
                    sZeroRecords: "No se encontraron resultados",
                    sEmptyTable: "Ningún dato disponible en esta tabla",
                    sInfo: "Mostrando del inicio al fin de un total registros",
                    sInfoEmpty: "Mostrando del 0 al 0 de un total de 0 registros",
                    sInfoFiltered: "(filtrado de un total de MAX registros)",
                    sInfoPostFix: "",
                    sSearch: "Buscar:",
                    sUrl: "",
                    sInfoThousands: ",",
                    sLoadingRecords: "Cargando...",
                    oPaginate: {
                        sFirst: "Primero",
                        sLast: "Último",
                        sNext: "Siguiente",
                        sPrevious: "Anterior"
                    },
                    oAria: {
                        sSortAscending: ": Activar para ordenar la columna de manera ascendente",
                        sSortDescending: ": Activar para ordenar la columna de manera descendente"
                    },
                },
            });

        });

        function mostrarid() {
            id = document.getElementById('IdOrdenPedido').value;
            alert(id);
        }

        function abrirmodal() {
            $('#editar').show();
        }
    </script>
</body>

</html>